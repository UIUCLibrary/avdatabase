{% extends "details_table.html" %}
{% from "_macros.html" import notes_table_row, notes_table, metadata_table %}
{% import  "_details_macros.html" as widgets%}
{% import "_item_macros.html" as item_widgets %}
{#{% from "_details_macros.html" import add_field_row, metadata_text_edit_widget %} }}#}

{% block entity_navbar %}
    <nav class="navbar navbar-expand-lg  navbar-light justify-content-start bg-light">
        <div class="mx-1">
            <button class="btn btn-outline-primary "
                    type="button"
                    disabled
            >New</button>
        </div>
    </nav>
{% endblock %}
{% block detail_table %}
    <div class="card my-1">
        <div class="card-body">
            {%  call metadata_table() %}
                <tr>
                    {{widgets.metadata_text_edit_widget("Name", item['name'], 'name', api_path)}}
                </tr>
{#                <tr>#}
{#                    {{widgets.metadata_text_edit_widget("File Name", item['file_name'], 'file_name', api_path)}}#}
{#                </tr>#}
                <tr>
                    {{widgets.metadata_number_edit_widget("Object Sequence", item['obj_sequence'], 'obj_sequence', api_path)}}
                </tr>
            {% endcall %}
        </div>
    </div>
    <div class="card">
        <h5 class="card-header">Files</h5>
        <div class="card-body">
            <table class="table">
                <caption hidden>Files</caption>
                <thead>
                    <tr>
                        <th class="col-sm-3" scope="col">Filename</th>
                        <th scope="col">Remove</th>
                    </tr>
                </thead>
                <tbody>
                    {% for file in item.files %}
                        {{ item_widgets.item_file_row(file, url_for("page_file_details", project_id=project_id, object_id=object_id, item_id=item['item_id'], file_id=file['id'])) }}

                    {% endfor %}
                    <tr>
                        <td></td>
                        <td>
                            <div class="btn-group float-right" role="group">
                                <button
                                    class="btn btn-primary btn-sm"
                                    onclick="alert('does nothing right now')"
    {#                                data-toggle="modal"#}
    {#                                data-target="#noteEditor"#}
    {#                                data-title="Create New Note"#}
    {#                                data-dialogtype="new"#}
    {#                                data-source="{{ note_api_route }}">#}
                                    >Add
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="card">
        <h5 class="card-header">Notes</h5>
        <div class="card-body">
            {% call(note) notes_table(item['notes'], api_path) %}
                {{ notes_table_row(note, url_for('note', note_id=note['note_id'])) }}
            {% endcall %}
        </div>
    </div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    {{ note_editor_events("/api/project/" ~ project_id ~ "/object/" ~ object_id ~ "/item/" ~ item.item_id, valid_note_types) }}
{% endblock %}